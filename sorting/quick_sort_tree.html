<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¿«é€Ÿæ’åºæ ‘çŠ¶åŠ¨ç”»æ¼”ç¤º</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }
    
    .content-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .visualization-section {
      width: 100%;
      max-width: 800px; /* å¢åŠ æœ€å¤§å®½åº¦ï¼Œä¸æ ‘å®¹å™¨å®½åº¦ä¸€è‡´ */
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    #tree-container {
      position: relative;
      width: 100%; /* å¢åŠ åˆå§‹å®½åº¦ */
      min-height: 600px;
      background-color: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
      margin-bottom: 20px;
      margin-left: auto;
      margin-right: auto;
      padding: 20px;
      scrollbar-width: thin; /* Firefox */
      scrollbar-color: #888 #f1f1f1; /* Firefox */
    }

    /* Webkitæµè§ˆå™¨çš„æ»šåŠ¨æ¡æ ·å¼ */
    #tree-container::-webkit-scrollbar {
      height: 8px;
    }

    #tree-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    #tree-container::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    #tree-container::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    /* å“åº”å¼å¸ƒå±€ */
    @media (max-width: 1300px) {
      #tree-container {
        width: 95vw;
      }
    }
    
    .node {
      position: absolute;
      min-width: 80px;
      height: 36px;
      background: #fff;
      border: 2px solid #4444FF;
      border-radius: 6px;
      text-align: center;
      line-height: 36px;
      user-select: none;
      transition: background-color 0.5s;
      font-weight: 600;
      padding: 0 10px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .node.pivot {
      background-color: #ffecb3;
      border-color: #FF9800;
    }
    
    .node.sorted {
      background-color: #e6ffe6;
      border-color: #4CAF50;
      color: #155724;
    }
    
    #log {
      margin-top: 20px;
      font-family: monospace;
      font-size: 14px;
      height: 200px;
      overflow-y: auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      padding: 10px;
      white-space: pre-wrap;
      width: 100%;
    }
    
    #info {
      text-align: center;
      margin-bottom: 20px;
      font-size: 18px;
      color: #333;
      padding: 10px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      width: 100%;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background-color: #45a049;
    }
    
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    
    .speed-control {
      display: flex;
      align-items: center;
      gap: 10px;
      background-color: white;
      padding: 8px 15px;
      border-radius: 4px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    
    .speed-control label {
      color: #333;
      font-size: 14px;
    }
    
    .speed-control input[type="range"] {
      width: 150px;
    }
    
    #speedValue {
      min-width: 60px;
      text-align: right;
      color: #666;
      font-size: 14px;
    }
    
    .legend {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 15px;
      padding: 10px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      width: 100%;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      margin: 5px 15px;
    }
    
    .legend-color {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-right: 8px;
    }
    
    .legend-text {
      font-size: 14px;
      color: #333;
    }
    
    @media (max-width: 768px) {
      .content-wrapper {
        flex-direction: column;
      }
      
      .visualization-section {
        max-width: 100%;
      }
      
      .legend {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .legend-item {
        margin: 5px 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>å¿«é€Ÿæ’åºæ ‘çŠ¶åŠ¨ç”»æ¼”ç¤º</h1>
    
    <div class="content-wrapper">
      <div class="visualization-section">
        <div id="info">å‡†å¤‡å°±ç»ªï¼Œç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º</div>
        
        <div class="controls">
          <button id="startBtn" onclick="startSort()">å¼€å§‹æ’åº</button>
          <button id="pauseBtn" onclick="togglePause()" disabled>æš‚åœ</button>
          <button id="resetBtn" onclick="resetTree()">é‡ç½®</button>
          <button id="newArrayBtn" onclick="generateNewArray()">ç”Ÿæˆæ–°æ•°ç»„</button>
          <div class="speed-control">
            <label for="speedSlider">åŠ¨ç”»é€Ÿåº¦:</label>
            <input type="range" id="speedSlider" min="100" max="1000" step="100" value="600" onchange="updateSpeed(this.value)">
            <span id="speedValue">600ms</span>
          </div>
        </div>
        
        <div id="tree-container">
          <svg id="connections" style="position:absolute; top:0; left:0; width:100%; height:600px; pointer-events:none; overflow:visible;"></svg>
        </div>
        
        <div class="legend">
          <div class="legend-item">
            <span class="legend-color" style="background-color: #4444FF; border-color: #4444FF;"></span>
            <span class="legend-text">æ™®é€šèŠ‚ç‚¹</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: #ffecb3; border-color: #FF9800;"></span>
            <span class="legend-text">æ¢è½´å…ƒç´ </span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: #e6ffe6; border-color: #4CAF50;"></span>
            <span class="legend-text">å·²æ’åº</span>
          </div>
        </div>
        
        <div id="log"></div>
      </div>
    </div>
  </div>

<script>
  // DOM å…ƒç´ 
  const treeContainer = document.getElementById('tree-container');
  const svg = document.getElementById('connections');
  const logEl = document.getElementById('log');
  const infoEl = document.getElementById('info');
  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');
  const newArrayBtn = document.getElementById('newArrayBtn');

  // é…ç½®å‚æ•°
  const nodeWidth = 80; // æœ€å°èŠ‚ç‚¹å®½åº¦
  const nodeHeight = 36;
  const verticalGap = 80;
  const horizontalGap = 60; // å‡å°æ°´å¹³é—´è·ï¼Œé¿å…èŠ‚ç‚¹è·‘åˆ°å±å¹•å¤–

  // çŠ¶æ€å˜é‡
  let initialArray = [8, 3, 1, 7, 0, 10, 2];
  let isSorting = false;
  let isPaused = false;
  let resumeCallback = null;
  let animationSpeed = 600; // é»˜è®¤åŠ¨ç”»é€Ÿåº¦ï¼ˆæ¯«ç§’ï¼‰
  
  // è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„ä½ç½®ï¼ˆå±‚ï¼Œindexï¼‰
  // indexè¡¨ç¤ºåŒå±‚ç¬¬å‡ ä¸ªèŠ‚ç‚¹
  let positions = [];

  // å·¥å…·å‡½æ•°
  function sleep(ms = null) {
    const delayTime = ms !== null ? ms : animationSpeed;
    return new Promise(res => setTimeout(res, delayTime));
  }

  // ç­‰å¾…ç»§ç»­çš„å‡½æ•°
  function waitForResume() {
    return new Promise(resolve => {
      resumeCallback = resolve;
    });
  }

  function logMessage(msg) {
    const div = document.createElement('div');
    div.textContent = msg;
    logEl.appendChild(div);
    logEl.scrollTop = logEl.scrollHeight;
  }

  // æ¸…ç©ºæ—¥å¿—
  function clearLog() {
    logEl.innerHTML = '';
  }

  // æ¸…ç©ºæ ‘å®¹å™¨
  function clearTree() {
    // ä¿ç•™SVGå…ƒç´ ä½†æ¸…ç©ºå…¶å†…å®¹
    while (svg.firstChild) {
      svg.removeChild(svg.firstChild);
    }
    
    // ç§»é™¤æ‰€æœ‰èŠ‚ç‚¹å…ƒç´ ï¼ˆé™¤äº†SVGï¼‰
    const nodes = treeContainer.querySelectorAll('.node');
    nodes.forEach(node => node.remove());
  }

  // æ›´æ–°æŒ‰é’®çŠ¶æ€
  function updateButtonStates() {
    startBtn.disabled = isSorting;
    resetBtn.disabled = isSorting;
    newArrayBtn.disabled = isSorting;
    pauseBtn.disabled = !isSorting;
    
    if (isPaused) {
      pauseBtn.textContent = 'ç»§ç»­';
    } else {
      pauseBtn.textContent = 'æš‚åœ';
    }
  }

  // è®¡ç®—å¹¶ä¿å­˜èŠ‚ç‚¹ä½ç½®ï¼Œä¿è¯æ ‘å½¢å·¦å³å±•å¼€
  // levelå±‚ï¼Œposè¡¨ç¤ºè¯¥å±‚çš„æ¨ªå‘åºå·
  function calcNodePosition(level, pos) {
    // éšç€å±‚çº§å¢åŠ ï¼Œæ°´å¹³é—´è·éœ€è¦å‡å°ï¼Œå¦åˆ™èŠ‚ç‚¹ä¼šè¶Šæ¥è¶Šåˆ†æ•£
    // ä½¿ç”¨ä¸€ä¸ªåŸºäºå±‚çº§çš„ç¼©æ”¾å› å­ï¼Œæ›´æ¿€è¿›åœ°å‡å°é—´è·
    const scaleFactor = Math.max(0.3, 1 - level * 0.4); // éšç€å±‚çº§å¢åŠ ï¼Œç¼©æ”¾å› å­å‡å°å¾—æ›´å¿«ï¼Œä½†ä¸å°äº0.3
    const adjustedHorizontalGap = horizontalGap * scaleFactor;
    
    // è®¡ç®—å®¹å™¨ä¸­å¿ƒä½ç½®
    const containerWidth = parseInt(treeContainer.style.width || '800');
    const centerOffset = containerWidth / 2;
    
    // è®¡ç®—èŠ‚ç‚¹ä½ç½®ï¼Œä½¿æ ‘æ›´å±…ä¸­
    // å¯¹äºç¬¬ä¸€å±‚(level=0)ï¼Œå°†å…¶æ”¾åœ¨ä¸­å¿ƒä½ç½®
    if (level === 0) {
      return {
        x: centerOffset - nodeWidth / 2,
        y: level * (nodeHeight + verticalGap) + 20,
      };
    } else {
      // å¯¹äºå…¶ä»–å±‚çº§ï¼Œæ ¹æ®posè®¡ç®—ä½ç½®ï¼Œä½†ä½¿ç”¨ç›¸å¯¹äºä¸­å¿ƒçš„åç§»
      // è®¡ç®—å½“å‰å±‚çº§çš„æœ€å¤§èŠ‚ç‚¹æ•°ï¼ˆ2^levelï¼‰
      const maxNodesInLevel = Math.pow(2, level);
      // è®¡ç®—å½“å‰å±‚çº§çš„æ€»å®½åº¦
      const levelWidth = maxNodesInLevel * (nodeWidth + adjustedHorizontalGap);
      // è®¡ç®—èµ·å§‹xåæ ‡ï¼Œä½¿è¯¥å±‚å±…ä¸­
      const startX = centerOffset - levelWidth / 2;
      
      return {
        x: startX + pos * (nodeWidth + adjustedHorizontalGap),
        y: level * (nodeHeight + verticalGap) + 20,
      };
    }
  }

  // åˆ›å»ºèŠ‚ç‚¹div
  function createNode(text, level, pos, extraClass='') {
    const node = document.createElement('div');
    node.className = 'node ' + extraClass;
    node.textContent = text;
    
    // å…ˆæ·»åŠ åˆ°DOMï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è·å–å…¶å®é™…å®½åº¦
    treeContainer.appendChild(node);
    
    // è·å–èŠ‚ç‚¹çš„å®é™…å®½åº¦
    const nodeRect = node.getBoundingClientRect();
    const actualWidth = nodeRect.width;
    
    // é‡æ–°è®¡ç®—ä½ç½®ï¼Œè€ƒè™‘å®é™…å®½åº¦
    const { x, y } = calcNodePosition(level, pos);
    node.style.left = `${x - (actualWidth - nodeWidth) / 2}px`; // è°ƒæ•´æ°´å¹³ä½ç½®ï¼Œä½¿èŠ‚ç‚¹ä¸­å¿ƒå¯¹é½
    node.style.top = `${y}px`;
    
    // æ ¹æ®æ ‘çš„æ·±åº¦åŠ¨æ€è°ƒæ•´æ ‘å®¹å™¨çš„é«˜åº¦
    const requiredHeight = (level + 1) * (nodeHeight + verticalGap) + 100; // é¢å¤–æ·»åŠ ä¸€äº›ç©ºé—´
    if (requiredHeight > parseInt(treeContainer.style.height || '600')) {
      treeContainer.style.height = `${requiredHeight}px`;
      svg.setAttribute('height', `${requiredHeight}px`);
    }
    
    // æ ¹æ®èŠ‚ç‚¹ä½ç½®åŠ¨æ€è°ƒæ•´æ ‘å®¹å™¨çš„å®½åº¦
    const requiredWidth = x + actualWidth + 100; // å¢åŠ é¢å¤–ç©ºé—´ï¼Œç¡®ä¿èŠ‚ç‚¹ä¸ä¼šå¤ªé è¿‘è¾¹ç¼˜
    const currentWidth = parseInt(treeContainer.style.width || '1200');
    if (requiredWidth > currentWidth) {
      const newWidth = Math.max(requiredWidth, currentWidth * 1.2); // æ¯æ¬¡è‡³å°‘å¢åŠ 20%çš„å®½åº¦
      treeContainer.style.width = `${newWidth}px`;
      svg.setAttribute('width', `${newWidth}px`);
    }
    
    // è‡ªåŠ¨æ»šåŠ¨åˆ°æ–°åˆ›å»ºçš„èŠ‚ç‚¹ï¼Œç¡®ä¿å®ƒåœ¨è§†å›¾ä¸­å¯è§
    const containerScrollLeft = treeContainer.scrollLeft;
    const containerWidth = treeContainer.clientWidth;
    const nodeLeft = x - (actualWidth - nodeWidth) / 2;
    const nodeRight = nodeLeft + actualWidth;
    
    // å¦‚æœèŠ‚ç‚¹åœ¨å¯è§†åŒºåŸŸå¤–ï¼Œæ»šåŠ¨åˆ°ä½¿å…¶å¯è§çš„ä½ç½®
    if (nodeLeft < containerScrollLeft || nodeRight > containerScrollLeft + containerWidth) {
      // æ»šåŠ¨åˆ°èŠ‚ç‚¹å±…ä¸­çš„ä½ç½®
      treeContainer.scrollLeft = nodeLeft - (containerWidth - actualWidth) / 2;
    }
    
    return node;
  }

  // ç”»è¿çº¿ï¼šä½¿ç”¨è´å¡å°”æ›²çº¿è¿æ¥èŠ‚ç‚¹
  function drawLine(fromNode, toNode) {
    const fromRect = fromNode.getBoundingClientRect();
    const toRect = toNode.getBoundingClientRect();
    const containerRect = treeContainer.getBoundingClientRect();

    // è®¡ç®—ç›¸å¯¹ container çš„åæ ‡
    const x1 = fromRect.left + fromRect.width / 2 - containerRect.left;
    const y1 = fromRect.top + fromRect.height - containerRect.top;
    const x2 = toRect.left + toRect.width / 2 - containerRect.left;
    const y2 = toRect.top - containerRect.top;

    // è®¡ç®—æ§åˆ¶ç‚¹ï¼Œä½¿æ›²çº¿æ›´è‡ªç„¶
    const midY = y1 + (y2 - y1) / 2;
    
    // åˆ›å»ºè·¯å¾„å…ƒç´ 
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute('d', `M ${x1} ${y1} C ${x1} ${midY}, ${x2} ${midY}, ${x2} ${y2}`);
    path.setAttribute('stroke', '#666');
    path.setAttribute('stroke-width', '2');
    path.setAttribute('fill', 'none');
    svg.appendChild(path);
    
    // æ·»åŠ ç®­å¤´
    const arrowSize = 6;
    const arrow = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
    
    // è®¡ç®—ç®­å¤´æ–¹å‘
    const dx = x2 - x1;
    const dy = y2 - y1;
    const angle = Math.atan2(dy, dx);
    
    // ç®­å¤´é¡¶ç‚¹
    const topX = x2;
    const topY = y2;
    
    // ç®­å¤´åº•éƒ¨ä¸¤ä¸ªç‚¹
    const leftX = x2 - arrowSize * Math.cos(angle - Math.PI/6);
    const leftY = y2 - arrowSize * Math.sin(angle - Math.PI/6);
    const rightX = x2 - arrowSize * Math.cos(angle + Math.PI/6);
    const rightY = y2 - arrowSize * Math.sin(angle + Math.PI/6);
    
    arrow.setAttribute('points', `${topX},${topY} ${leftX},${leftY} ${rightX},${rightY}`);
    arrow.setAttribute('fill', '#666');
    svg.appendChild(arrow);
  }

  // ç”Ÿæˆæ–°æ•°ç»„
  function generateNewArray() {
    const length = Math.floor(Math.random() * 5) + 5; // 5-9ä¸ªå…ƒç´ 
    initialArray = Array.from({length}, () => Math.floor(Math.random() * 20));
    clearTree();
    clearLog();
    infoEl.textContent = `æ–°æ•°ç»„å·²ç”Ÿæˆ: [${initialArray.join(', ')}]`;
  }

  // é‡ç½®æ ‘
  function resetTree() {
    clearTree();
    clearLog();
    infoEl.textContent = 'å‡†å¤‡å°±ç»ªï¼Œç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º';
    updateButtonStates();
  }

  // æš‚åœ/ç»§ç»­åŠŸèƒ½
  function togglePause() {
    if (!isSorting) return;
    
    isPaused = !isPaused;
    updateButtonStates();
    
    if (!isPaused && resumeCallback) {
      resumeCallback();
      resumeCallback = null;
    }
  }
  
  // æ›´æ–°åŠ¨ç”»é€Ÿåº¦
  function updateSpeed(value) {
    animationSpeed = parseInt(value);
    document.getElementById('speedValue').textContent = `${animationSpeed}ms`;
    logMessage(`åŠ¨ç”»é€Ÿåº¦å·²æ›´æ–°ä¸º: ${animationSpeed}ms`);
  }
  
  // ç­‰å¾…ç»§ç»­çš„Promise
  function waitForResume() {
    return new Promise(resolve => {
      resumeCallback = resolve;
    });
  }

  // é€’å½’å®ç°å¿«é€Ÿæ’åºå¹¶åŠ¨ç”»å±•ç¤º
  async function quickSortAnimation(arr, level=0, pos=0, parentNode=null) {
    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }
    
    infoEl.textContent = `é€’å½’æ·±åº¦ ${level}ï¼Œå¤„ç†æ•°ç»„: [${arr.join(', ')}]`;
    logMessage(`æ·±åº¦${level} - å¤„ç†: [${arr.join(', ')}]`);

    // åˆ›å»ºå½“å‰èŠ‚ç‚¹
    const currNode = createNode(`[${arr.join(', ')}]`, level, pos);
    await sleep();

    if (parentNode) {
      drawLine(parentNode, currNode);
    }

    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }

    if (arr.length <= 1) {
      logMessage(`æ·±åº¦${level} - é€’å½’åŸºï¼Œè¿”å›: [${arr.join(', ')}]`);
      currNode.classList.add('sorted');
      return arr;
    }

    const pivot = arr[arr.length - 1];
    const leftArr = arr.filter(x => x < pivot);
    const rightArr = arr.filter(x => x > pivot);

    logMessage(`æ·±åº¦${level} - é€‰å®š pivot: ${pivot}`);
    logMessage(`æ·±åº¦${level} - å·¦æ•°ç»„: [${leftArr.join(', ')}], å³æ•°ç»„: [${rightArr.join(', ')}]`);

    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }

    // è®¡ç®—å·¦å­æ ‘posï¼Œä¸ºå½“å‰pos * 2
    const leftPos = pos * 2;
    const leftSorted = await quickSortAnimation(leftArr, level + 1, leftPos, currNode);

    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }

    // åˆ›å»º pivot å•èŠ‚ç‚¹
    const pivotPos = pos * 2 + 1;
    const pivotNode = createNode(`${pivot}`, level + 1, pivotPos, 'pivot');
    await sleep();
    drawLine(currNode, pivotNode);

    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }

    // å³å­æ ‘pos ä¸ºå½“å‰pos * 2 + 2
    const rightPos = pos * 2 + 2;
    const rightSorted = await quickSortAnimation(rightArr, level + 1, rightPos, currNode);

    // æ£€æŸ¥æ˜¯å¦æš‚åœ
    if (isPaused) {
      await waitForResume();
    }

    // æ ‡è®°å·²æ’åºèŠ‚ç‚¹ï¼ˆåˆå¹¶ï¼‰
    const sortedPos = pos; // çˆ¶èŠ‚ç‚¹æ‰€åœ¨ä½ç½®
    const sortedNode = createNode(`âœ… [${[...leftSorted, pivot, ...rightSorted].join(', ')}]`, level, sortedPos, 'sorted');
    await sleep();

    logMessage(`âœ… æ·±åº¦${level} - æ’åºå®Œæˆ: [${[...leftSorted, pivot, ...rightSorted].join(', ')}]`);

    return [...leftSorted, pivot, ...rightSorted];
  }

  // å¼€å§‹æ’åº
  async function startSort() {
    if (isSorting) return;
    
    isSorting = true;
    isPaused = false;
    updateButtonStates();
    
    infoEl.textContent = 'æ’åºä¸­...';
    clearTree();
    clearLog();
    
    try {
      await quickSortAnimation([...initialArray]);
      infoEl.textContent = 'æ’åºå®Œæˆ âœ…';
      logMessage('ğŸ‰ æ’åºå®Œæˆ');
    } catch (error) {
      console.error('æ’åºè¿‡ç¨‹ä¸­å‡ºé”™:', error);
      infoEl.textContent = 'æ’åºè¿‡ç¨‹ä¸­å‡ºé”™';
    } finally {
      isSorting = false;
      isPaused = false;
      updateButtonStates();
    }
  }

  // åˆå§‹åŒ–
  window.addEventListener('DOMContentLoaded', () => {
    updateButtonStates();
    infoEl.textContent = 'å‡†å¤‡å°±ç»ªï¼Œç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º';
    logMessage('å¿«é€Ÿæ’åºæ ‘çŠ¶åŠ¨ç”»æ¼”ç¤ºå·²å‡†å¤‡å°±ç»ª');
    logMessage(`åˆå§‹æ•°ç»„: [${initialArray.join(', ')}]`);
  });
</script>

</body>
</html>
