<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快速排序可视化 - 分治算法动画 | 算法可视化</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="通过交互式动画学习快速排序算法。观察分治策略和基准元素分区过程，理解平均O(n log n)时间复杂度的高效排序原理。">
    <meta name="keywords" content="快速排序,Quick Sort,分治算法,基准元素,分区,排序算法,算法可视化,递归">
    <meta name="author" content="Algorithm Visualization">
    <link rel="canonical" href="https://algorithm-visualizer.example.com/sorting/quick-sort/">
    
    <!-- Open Graph -->
    <meta property="og:title" content="快速排序可视化 - 分治算法动画">
    <meta property="og:description" content="通过交互式动画学习快速排序算法，观察分区过程。">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://algorithm-visualizer.example.com/sorting/quick-sort/">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="快速排序可视化">
    <meta name="twitter:description" content="交互式动画演示快速排序分治策略">
    
    <link rel="stylesheet" href="../../common/styles.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-decoration">
    <!-- 语言切换器 -->
    <div class="lang-switcher">
        <button class="lang-btn" data-lang="zh">中文</button>
        <button class="lang-btn" data-lang="en">EN</button>
    </div>

    <div class="container">
        <a href="../../index.html" class="nav-link" data-i18n="common.backHome">← 返回首页</a>
        
        <header class="page-header">
            <h1 class="title" data-i18n="quickSort.title">快速排序可视化</h1>
            <p class="subtitle" data-i18n="quickSort.subtitle">观察分治策略与基准元素的分区过程</p>
        </header>
        
        <!-- 算法简介 -->
        <div class="algo-intro fade-in">
            <p data-i18n="quickSort.intro">快速排序（Quick Sort）是一种高效的分治排序算法。它选择一个"基准"元素，将数组分成两部分：比基准小的元素放在左边，比基准大的元素放在右边。然后递归地对左右两部分继续排序。因其出色的平均性能，快速排序是实际应用中最常用的排序算法之一。</p>
        </div>
        
        <!-- 递归深度指示器 -->
        <div class="depth-indicator" id="depthIndicator">
            <span class="depth-label">递归深度:</span>
            <div class="depth-bars" id="depthBars"></div>
        </div>
        
        <!-- 指针指示器 -->
        <div class="pointer-legend">
            <span class="legend-item pivot"><span class="icon">⚡</span> 基准元素</span>
            <span class="legend-item left-ptr"><span class="icon">◀</span> 左指针</span>
            <span class="legend-item right-ptr"><span class="icon">▶</span> 右指针</span>
        </div>
        
        <!-- 数组容器 -->
        <div class="array-wrapper">
            <div class="array-container" id="arrayContainer">
                <!-- 柱状条将由 JavaScript 动态生成 -->
            </div>
            <!-- 指针层 -->
            <div class="pointers-layer" id="pointersLayer"></div>
        </div>
        
        <!-- 分区范围指示 -->
        <div class="partition-info" id="partitionInfo">
            <span id="partitionText">点击开始查看分区过程</span>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" id="startBtn" data-i18n="common.startSort">开始排序</button>
            <button class="btn btn-secondary" id="resetBtn" data-i18n="common.reset">重置</button>
        </div>
        
        <div class="info">
            <span class="status-badge" id="statusText" data-i18n="common.clickToStart">点击"开始排序"查看动画</span>
        </div>
        
        <!-- Tab面板 -->
        <div class="tabs-container fade-in">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="principle" data-i18n="common.tabPrinciple">📖 工作原理</button>
                <button class="tab-btn" data-tab="complexity" data-i18n="common.tabComplexity">⏱️ 复杂度分析</button>
                <button class="tab-btn" data-tab="usage" data-i18n="common.tabUsage">💡 应用场景</button>
                <button class="tab-btn" data-tab="code" data-i18n="common.tabCode">📝 代码实现</button>
            </div>
            
            <div class="tab-content active" id="principle">
                <h4>算法步骤</h4>
                <ol>
                    <li><strong>选择基准</strong>：从数组中选择一个元素作为基准（pivot），常见策略有选择第一个、最后一个、中间元素或随机选择</li>
                    <li><strong>分区操作</strong>：重新排列数组，使所有比基准小的元素放在基准前面，所有比基准大的元素放在基准后面</li>
                    <li><strong>递归排序</strong>：递归地对基准左右两边的子数组进行快速排序</li>
                    <li><strong>合并结果</strong>：由于是原地排序，子数组排序完成后整个数组就有序了</li>
                </ol>
            </div>
            
            <div class="tab-content" id="complexity">
                <h4>时间与空间复杂度</h4>
                <table class="complexity-table">
                    <tr>
                        <th>情况</th>
                        <th>时间复杂度</th>
                        <th>说明</th>
                    </tr>
                    <tr>
                        <td>最好情况</td>
                        <td class="highlight">O(n log n)</td>
                        <td>每次分区都能平均分割数组</td>
                    </tr>
                    <tr>
                        <td>平均情况</td>
                        <td class="highlight">O(n log n)</td>
                        <td>随机输入的期望性能</td>
                    </tr>
                    <tr>
                        <td>最坏情况</td>
                        <td>O(n²)</td>
                        <td>每次选到最大或最小元素作为基准</td>
                    </tr>
                    <tr>
                        <td>空间复杂度</td>
                        <td>O(log n)</td>
                        <td>递归调用栈的深度</td>
                    </tr>
                </table>
                <p style="margin-top: var(--spacing-sm); color: var(--text-secondary);">
                    快速排序是<strong>不稳定排序</strong>，但可以通过三路划分等变体来优化。
                </p>
            </div>
            
            <div class="tab-content" id="usage">
                <h4>适用场景</h4>
                <ul>
                    <li>通用排序：大多数编程语言标准库的排序函数都基于快速排序</li>
                    <li>大规模数据排序：平均性能优秀，缓存命中率高</li>
                    <li>不需要稳定性的场景：如数值排序</li>
                    <li>可以结合其他算法：小数组使用插入排序优化</li>
                </ul>
                <div class="use-cases">
                    <span class="use-case-tag">通用排序</span>
                    <span class="use-case-tag">大数据集</span>
                    <span class="use-case-tag">系统库实现</span>
                    <span class="use-case-tag">竞赛算法</span>
                </div>
            </div>
            
            <div class="tab-content" id="code">
                <h4>代码实现</h4>
                <div class="code-lang-tabs">
                    <button class="code-lang-btn active" data-lang="python">
                        <span class="lang-icon">🐍</span> Python
                    </button>
                    <button class="code-lang-btn" data-lang="java">
                        <span class="lang-icon">☕</span> Java
                    </button>
                </div>
                
                <div class="code-container">
                    <div class="code-block active" id="python-code">
                        <pre class="code"><span class="keyword">def</span> <span class="function">partition</span>(arr, low, high):
    <span class="string">"""分区函数：选择最后一个元素作为基准"""</span>
    pivot = arr[high]
    i = low - <span class="number">1</span>
    
    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(low, high):
        <span class="keyword">if</span> arr[j] <= pivot:
            i += <span class="number">1</span>
            arr[i], arr[j] = arr[j], arr[i]
    
    arr[i + <span class="number">1</span>], arr[high] = arr[high], arr[i + <span class="number">1</span>]
    <span class="keyword">return</span> i + <span class="number">1</span>


<span class="keyword">def</span> <span class="function">quick_sort</span>(arr, low, high):
    <span class="string">"""快速排序算法"""</span>
    <span class="keyword">if</span> low < high:
        <span class="comment"># 获取分区点</span>
        pi = <span class="function">partition</span>(arr, low, high)
        
        <span class="comment"># 递归排序左右两部分</span>
        <span class="function">quick_sort</span>(arr, low, pi - <span class="number">1</span>)
        <span class="function">quick_sort</span>(arr, pi + <span class="number">1</span>, high)


<span class="comment"># 使用示例</span>
arr = [<span class="number">10</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">5</span>]
<span class="function">quick_sort</span>(arr, <span class="number">0</span>, <span class="function">len</span>(arr) - <span class="number">1</span>)
<span class="function">print</span>(arr)
<span class="comment"># 输出: [1, 5, 7, 8, 9, 10]</span></pre>
                    </div>
                    
                    <div class="code-block" id="java-code">
                        <pre class="code"><span class="keyword">public class</span> <span class="type">QuickSort</span> {
    
    <span class="comment">/**
     * 分区函数
     */</span>
    <span class="keyword">private static int</span> <span class="function">partition</span>(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high) {
        <span class="type">int</span> pivot = arr[high];
        <span class="type">int</span> i = low - <span class="number">1</span>;
        
        <span class="keyword">for</span> (<span class="type">int</span> j = low; j < high; j++) {
            <span class="keyword">if</span> (arr[j] <= pivot) {
                i++;
                <span class="comment">// 交换</span>
                <span class="type">int</span> temp = arr[i];
                arr[i] = arr[j];
                arr[j] = temp;
            }
        }
        
        <span class="comment">// 将基准放到正确位置</span>
        <span class="type">int</span> temp = arr[i + <span class="number">1</span>];
        arr[i + <span class="number">1</span>] = arr[high];
        arr[high] = temp;
        
        <span class="keyword">return</span> i + <span class="number">1</span>;
    }
    
    <span class="comment">/**
     * 快速排序算法
     */</span>
    <span class="keyword">public static void</span> <span class="function">quickSort</span>(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high) {
        <span class="keyword">if</span> (low < high) {
            <span class="type">int</span> pi = <span class="function">partition</span>(arr, low, high);
            
            <span class="function">quickSort</span>(arr, low, pi - <span class="number">1</span>);
            <span class="function">quickSort</span>(arr, pi + <span class="number">1</span>, high);
        }
    }
    
    <span class="keyword">public static void</span> <span class="function">main</span>(<span class="type">String</span>[] args) {
        <span class="type">int</span>[] arr = {<span class="number">10</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">5</span>};
        <span class="function">quickSort</span>(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);
        System.out.<span class="function">println</span>(Arrays.<span class="function">toString</span>(arr));
        <span class="comment">// 输出: [1, 5, 7, 8, 9, 10]</span>
    }
}</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module" src="../../common/i18n.js"></script>
    <script src="script.js"></script>
    <script>
        // 语言切换器事件
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                if (window.I18n) {
                    window.I18n.switchLanguage(lang);
                }
            });
        });
        
        // Tab切换逻辑
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });
        
        // 代码语言切换
        document.querySelectorAll('.code-lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.code-lang-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.code-block').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.lang + '-code').classList.add('active');
            });
        });
    </script>
</body>
</html>
