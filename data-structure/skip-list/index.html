<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·³è·ƒè¡¨å¯è§†åŒ– - ç®—æ³•åŠ¨ç”»æ¼”ç¤º | ç®—æ³•å¯è§†åŒ–</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="é€šè¿‡äº¤äº’å¼åŠ¨ç”»å­¦ä¹ è·³è·ƒè¡¨ã€‚è·³è·ƒè¡¨æ˜¯ä¸€ç§æ¦‚ç‡æ€§æ•°æ®ç»“æ„ï¼Œä½¿ç”¨å¤šå±‚é“¾è¡¨å®ç°O(log n)çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚">
    <meta name="keywords" content="è·³è·ƒè¡¨,Skip List,Redis,ç®—æ³•å¯è§†åŒ–,æ•°æ®ç»“æ„,æ¦‚ç‡æ•°æ®ç»“æ„">
    <meta name="author" content="Algorithm Visualization">
    <link rel="canonical" href="https://algo.jsdiff.com/data-structure/skip-list/">
    
    <!-- Open Graph -->
    <meta property="og:title" content="è·³è·ƒè¡¨å¯è§†åŒ– - ç®—æ³•åŠ¨ç”»æ¼”ç¤º">
    <meta property="og:description" content="é€šè¿‡äº¤äº’å¼åŠ¨ç”»å­¦ä¹ è·³è·ƒè¡¨çš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œ">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://algo.jsdiff.com/data-structure/skip-list/">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="è·³è·ƒè¡¨å¯è§†åŒ–">
    <meta name="twitter:description" content="äº¤äº’å¼åŠ¨ç”»æ¼”ç¤ºè·³è·ƒè¡¨æ“ä½œ">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <link rel="stylesheet" href="/common/styles.css">
    <link rel="stylesheet" href="/common/algo-components.css">
    <link rel="stylesheet" href="style.css">

    <!-- Hreflang Tags for SEO -->
    <link rel="alternate" hreflang="zh-CN" href="https://algo.jsdiff.com/data-structure/skip-list/" />
    <link rel="alternate" hreflang="en" href="https://algo.jsdiff.com/en/data-structure/skip-list/" />
    <link rel="alternate" hreflang="x-default" href="https://algo.jsdiff.com/data-structure/skip-list/" />

    <!-- Baidu Analytics -->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?4bdc02239b6fe6f4e90583308d9ed3cd";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body class="bg-decoration algo-page">
    <!-- å…¬å…±é¡µå¤´ç”± JS æ³¨å…¥ -->
    <script type="module" src="/common/header.js"></script>

    <div class="container">
        
        <header class="page-header">
            <h1 class="title" data-en="Skip List Visualization">è·³è·ƒè¡¨å¯è§†åŒ–</h1>
            <p class="subtitle" data-en="Watch how Skip List uses probabilistic multi-level links for fast search">è§‚å¯Ÿè·³è·ƒè¡¨å¦‚ä½•åˆ©ç”¨æ¦‚ç‡æ€§å¤šå±‚é“¾æ¥å®ç°å¿«é€ŸæŸ¥æ‰¾</p>
        </header>
        
        <!-- ç®—æ³•ç®€ä»‹ -->
        <div class="algo-intro fade-in">
            <p data-en="Skip List is a probabilistic data structure that allows O(log n) search, insert and delete operations. It uses multiple levels of linked lists where each higher level 'skips' more elements, similar to express lanes in a highway.">
                è·³è·ƒè¡¨æ˜¯ä¸€ç§æ¦‚ç‡æ€§æ•°æ®ç»“æ„ï¼Œæ”¯æŒO(log n)çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å®ƒä½¿ç”¨å¤šå±‚é“¾è¡¨ï¼Œæ¯ä¸€å±‚éƒ½"è·³è¿‡"æ›´å¤šçš„å…ƒç´ ï¼Œç±»ä¼¼äºé«˜é€Ÿå…¬è·¯ä¸Šçš„å¿«é€Ÿè½¦é“ã€‚
            </p>
        </div>
        
        <!-- é…ç½®é¢æ¿ -->
        <div class="config-panel fade-in">
            <label class="config-label" data-en="Probability (level up chance):">æ¦‚ç‡ï¼ˆå±‚çº§æå‡æ¦‚ç‡ï¼‰ï¼š</label>
            <select id="probSelect" class="config-select">
                <option value="0.25">25%</option>
                <option value="0.5" selected>50%</option>
                <option value="0.75">75%</option>
            </select>
            <label class="config-label" data-en="Max Level:">æœ€å¤§å±‚æ•°ï¼š</label>
            <select id="maxLevelSelect" class="config-select">
                <option value="4" data-en="4 Levels">4å±‚</option>
                <option value="6" selected data-en="6 Levels">6å±‚</option>
                <option value="8" data-en="8 Levels">8å±‚</option>
            </select>
        </div>
        
        <!-- å¯è§†åŒ–åŒºåŸŸ -->
        <div class="visualization-container" id="visualizationContainer">
            <!-- å±‚çº§æ ‡ç­¾ -->
            <div class="level-labels" id="levelLabels"></div>
            <svg id="skipListSvg" class="skiplist-svg"></svg>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="controls">
            <div class="input-group">
                <input type="number" id="inputValue" placeholder="è¾“å…¥å€¼ (1-999)" data-placeholder-en="Enter value (1-999)" class="input-field" min="1" max="999">
                <button class="btn btn-primary" id="insertBtn" data-en="Insert">æ’å…¥</button>
                <button class="btn btn-info" id="searchBtn" data-en="Search">æŸ¥æ‰¾</button>
                <button class="btn btn-danger" id="deleteBtn" data-en="Delete">åˆ é™¤</button>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" id="resetBtn" data-en="Reset">é‡ç½®</button>
                <button class="btn btn-warning" id="randomBtn" data-en="Random">éšæœºæ•°æ®</button>
                <button class="btn btn-primary" id="demoBtn" data-en="â–¶ Demo">â–¶ æ¼”ç¤º</button>
            </div>
        </div>
        
        <div class="info">
            <span class="status-badge" id="statusText">è¾“å…¥å€¼å¹¶é€‰æ‹©æ“ä½œ</span>
        </div>
        
        <!-- Tabé¢æ¿ -->
        <div class="tabs-container fade-in">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="how-it-works">ğŸ“– å·¥ä½œåŸç†</button>
                <button class="tab-btn" data-tab="complexity">â±ï¸ å¤æ‚åº¦åˆ†æ</button>
                <button class="tab-btn" data-tab="applications">ğŸ’¡ åº”ç”¨åœºæ™¯</button>
                <button class="tab-btn" data-tab="code">ğŸ“ ä»£ç å®ç°</button>
            </div>
            
            <div id="how-it-works" class="tab-content active">
                <h4 data-en="Skip List Structure">è·³è·ƒè¡¨ç»“æ„</h4>
                <ul>
                    <li data-en="Multiple levels of sorted linked lists">å¤šå±‚æœ‰åºé“¾è¡¨</li>
                    <li data-en="Bottom level contains all elements">åº•å±‚åŒ…å«æ‰€æœ‰å…ƒç´ </li>
                    <li data-en="Each higher level is a subset of the level below">æ¯ä¸€å±‚éƒ½æ˜¯ä¸‹ä¸€å±‚çš„å­é›†</li>
                    <li data-en="Level promotion is determined by coin flips (probability)">å±‚çº§æå‡ç”±æŠ›ç¡¬å¸å†³å®šï¼ˆæ¦‚ç‡æ€§ï¼‰</li>
                </ul>
                
                <h4 data-en="Search Process">æŸ¥æ‰¾è¿‡ç¨‹</h4>
                <ol>
                    <li data-en="Start from the top-left (highest level head)">ä»å·¦ä¸Šè§’å¼€å§‹ï¼ˆæœ€é«˜å±‚å¤´èŠ‚ç‚¹ï¼‰</li>
                    <li data-en="Move right until next element is greater than target">å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ å¤§äºç›®æ ‡</li>
                    <li data-en="Move down one level and repeat">å‘ä¸‹ç§»åŠ¨ä¸€å±‚ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤</li>
                    <li data-en="Continue until found or reach bottom level">ç»§ç»­ç›´åˆ°æ‰¾åˆ°æˆ–åˆ°è¾¾åº•å±‚</li>
                </ol>
                
                <h4 data-en="Insert Process">æ’å…¥è¿‡ç¨‹</h4>
                <ol>
                    <li data-en="Find the position at each level (like search)">åœ¨æ¯ä¸€å±‚æ‰¾åˆ°æ’å…¥ä½ç½®ï¼ˆç±»ä¼¼æŸ¥æ‰¾ï¼‰</li>
                    <li data-en="Insert at level 0 (bottom)">åœ¨ç¬¬0å±‚æ’å…¥</li>
                    <li data-en="Flip a coin: heads = promote to next level">æŠ›ç¡¬å¸ï¼šæ­£é¢åˆ™æå‡åˆ°ä¸Šä¸€å±‚</li>
                    <li data-en="Repeat coin flips until tails or max level">é‡å¤æŠ›ç¡¬å¸ç›´åˆ°åé¢æˆ–è¾¾åˆ°æœ€å¤§å±‚</li>
                </ol>
            </div>
            
            <div id="complexity" class="tab-content">
                <table class="complexity-table">
                    <thead>
                        <tr>
                            <th data-en="Operation">æ“ä½œ</th>
                            <th data-en="Average">å¹³å‡</th>
                            <th data-en="Worst">æœ€å</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Search">æŸ¥æ‰¾</td>
                            <td>O(log n)</td>
                            <td>O(n)*</td>
                        </tr>
                        <tr>
                            <td data-en="Insert">æ’å…¥</td>
                            <td>O(log n)</td>
                            <td>O(n)*</td>
                        </tr>
                        <tr>
                            <td data-en="Delete">åˆ é™¤</td>
                            <td>O(log n)</td>
                            <td>O(n)*</td>
                        </tr>
                    </tbody>
                </table>
                <div class="complexity-note">
                    <p data-en="*Worst case is very rare due to probabilistic nature">*ç”±äºæ¦‚ç‡ç‰¹æ€§ï¼Œæœ€åæƒ…å†µéå¸¸ç½•è§</p>
                    <p data-en="Space Complexity: O(n) on average, O(n log n) worst case">ç©ºé—´å¤æ‚åº¦ï¼šå¹³å‡O(n)ï¼Œæœ€åO(n log n)</p>
                    <p data-en="Expected levels: O(log n) with p=0.5">æœŸæœ›å±‚æ•°ï¼šp=0.5æ—¶ä¸ºO(log n)</p>
                </div>
            </div>
            
            <div id="applications" class="tab-content">
                <div class="use-cases">
                    <div class="use-case highlight">
                        <h5 data-en="Redis Sorted Sets">Redis æœ‰åºé›†åˆ</h5>
                        <p data-en="Redis uses Skip List for ZSET to support O(log n) range queries and score updates">Redis ä½¿ç”¨è·³è·ƒè¡¨å®ç° ZSETï¼Œæ”¯æŒO(log n)çš„èŒƒå›´æŸ¥è¯¢å’Œåˆ†æ•°æ›´æ–°</p>
                    </div>
                    <div class="use-case">
                        <h5 data-en="LevelDB / RocksDB">LevelDB / RocksDB</h5>
                        <p data-en="Used in MemTable for in-memory sorted key-value storage">ç”¨äº MemTable å®ç°å†…å­˜ä¸­çš„æœ‰åºé”®å€¼å­˜å‚¨</p>
                    </div>
                    <div class="use-case">
                        <h5 data-en="Concurrent Data Structures">å¹¶å‘æ•°æ®ç»“æ„</h5>
                        <p data-en="Lock-free skip lists are easier to implement than lock-free balanced trees">æ— é”è·³è·ƒè¡¨æ¯”æ— é”å¹³è¡¡æ ‘æ›´å®¹æ˜“å®ç°</p>
                    </div>
                </div>
            </div>
            
            <div id="code" class="tab-content">
                <h4 data-en="Implementation">ä»£ç å®ç°</h4>
                <div class="code-lang-tabs">
                    <button class="code-lang-btn active" data-lang="python">
                        <span class="lang-icon">ğŸ</span> Python
                    </button>
                    <button class="code-lang-btn" data-lang="java">
                        <span class="lang-icon">â˜•</span> Java
                    </button>
                </div>
                
                <div id="python-code" class="code-block active">
                    <pre><code class="language-python">import random

class SkipListNode:
    def __init__(self, key, level):
        self.key = key
        self.forward = [None] * (level + 1)

class SkipList:
    def __init__(self, max_level=16, p=0.5):
        self.max_level = max_level
        self.p = p
        self.level = 0
        self.head = SkipListNode(float('-inf'), max_level)
    
    def random_level(self):
        """Generate random level using coin flips"""
        level = 0
        while random.random() < self.p and level < self.max_level:
            level += 1
        return level
    
    def search(self, key):
        """Search for a key in the skip list"""
        current = self.head
        for i in range(self.level, -1, -1):
            while current.forward[i] and current.forward[i].key < key:
                current = current.forward[i]
        current = current.forward[0]
        return current and current.key == key
    
    def insert(self, key):
        """Insert a key into the skip list"""
        update = [None] * (self.max_level + 1)
        current = self.head
        
        # Find position at each level
        for i in range(self.level, -1, -1):
            while current.forward[i] and current.forward[i].key < key:
                current = current.forward[i]
            update[i] = current
        
        # Determine level for new node
        new_level = self.random_level()
        if new_level > self.level:
            for i in range(self.level + 1, new_level + 1):
                update[i] = self.head
            self.level = new_level
        
        # Create and insert new node
        new_node = SkipListNode(key, new_level)
        for i in range(new_level + 1):
            new_node.forward[i] = update[i].forward[i]
            update[i].forward[i] = new_node

# Usage
sl = SkipList(max_level=6, p=0.5)
for val in [3, 6, 7, 9, 12, 19, 21, 25]:
    sl.insert(val)
print(sl.search(19))  # True
</code></pre>
                </div>
                
                <div id="java-code" class="code-block">
                    <pre><code class="language-java">import java.util.Random;

public class SkipList {
    private static final int MAX_LEVEL = 16;
    private static final double P = 0.5;
    
    private int level;
    private SkipListNode head;
    private Random random;
    
    public SkipList() {
        this.level = 0;
        this.head = new SkipListNode(Integer.MIN_VALUE, MAX_LEVEL);
        this.random = new Random();
    }
    
    private int randomLevel() {
        int lvl = 0;
        while (random.nextDouble() < P && lvl < MAX_LEVEL) {
            lvl++;
        }
        return lvl;
    }
    
    public boolean search(int key) {
        SkipListNode current = head;
        for (int i = level; i >= 0; i--) {
            while (current.forward[i] != null && 
                   current.forward[i].key < key) {
                current = current.forward[i];
            }
        }
        current = current.forward[0];
        return current != null && current.key == key;
    }
    
    public void insert(int key) {
        SkipListNode[] update = new SkipListNode[MAX_LEVEL + 1];
        SkipListNode current = head;
        
        for (int i = level; i >= 0; i--) {
            while (current.forward[i] != null && 
                   current.forward[i].key < key) {
                current = current.forward[i];
            }
            update[i] = current;
        }
        
        int newLevel = randomLevel();
        if (newLevel > level) {
            for (int i = level + 1; i <= newLevel; i++) {
                update[i] = head;
            }
            level = newLevel;
        }
        
        SkipListNode newNode = new SkipListNode(key, newLevel);
        for (int i = 0; i <= newLevel; i++) {
            newNode.forward[i] = update[i].forward[i];
            update[i].forward[i] = newNode;
        }
    }
    
    public static void main(String[] args) {
        SkipList sl = new SkipList();
        int[] values = {3, 6, 7, 9, 12, 19, 21, 25};
        for (int v : values) sl.insert(v);
        System.out.println(sl.search(19)); // true
    }
}

class SkipListNode {
    int key;
    SkipListNode[] forward;
    
    SkipListNode(int key, int level) {
        this.key = key;
        this.forward = new SkipListNode[level + 1];
    }
}
</code></pre>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module" src="/common/footer.js"></script>
    <script type="module" src="/common/i18n.js"></script>
    <script type="module" src="/common/tabs.js"></script>
    <script src="script.js"></script>
</body>
</html>
