<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMPå­—ç¬¦ä¸²åŒ¹é…å¯è§†åŒ– - å‰ç¼€è¡¨ç®—æ³• | ç®—æ³•å¯è§†åŒ–</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="é€šè¿‡äº¤äº’å¼åŠ¨ç”»å­¦ä¹ KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚ç†è§£å‰ç¼€è¡¨ï¼ˆNextæ•°ç»„ï¼‰çš„æ„å»ºè¿‡ç¨‹ï¼Œè§‚å¯Ÿå¦‚ä½•åˆ©ç”¨å·²åŒ¹é…ä¿¡æ¯é¿å…é‡å¤æ¯”è¾ƒï¼Œå®ç°O(n+m)çš„é«˜æ•ˆåŒ¹é…ã€‚">
    <meta name="keywords" content="KMP,å­—ç¬¦ä¸²åŒ¹é…,Knuth-Morris-Pratt,å‰ç¼€è¡¨,Nextæ•°ç»„,æ¨¡å¼åŒ¹é…,ç®—æ³•å¯è§†åŒ–">
    <meta name="author" content="Algorithm Visualization">
    <link rel="canonical" href="https://algo.jsdiff.com/sequence/kmp/">
    
    <!-- Open Graph -->
    <meta property="og:title" content="KMPå­—ç¬¦ä¸²åŒ¹é…å¯è§†åŒ– - å‰ç¼€è¡¨ç®—æ³•">
    <meta property="og:description" content="é€šè¿‡äº¤äº’å¼åŠ¨ç”»å­¦ä¹ KMPç®—æ³•ï¼Œç†è§£å‰ç¼€è¡¨çš„å·¥ä½œåŸç†ã€‚">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://algo.jsdiff.com/sequence/kmp/">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="KMPå­—ç¬¦ä¸²åŒ¹é…å¯è§†åŒ–">
    <meta name="twitter:description" content="äº¤äº’å¼åŠ¨ç”»æ¼”ç¤ºKMPå­—ç¬¦ä¸²åŒ¹é…">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <link rel="stylesheet" href="/common/styles.css">
    <link rel="stylesheet" href="/common/algo-components.css">
    <link rel="stylesheet" href="style.css">

    <!-- Hreflang Tags for SEO -->
    <link rel="alternate" hreflang="zh-CN" href="https://algo.jsdiff.com/sequence/kmp/" />
    <link rel="alternate" hreflang="en" href="https://algo.jsdiff.com/en/sequence/kmp/" />
    <link rel="alternate" hreflang="x-default" href="https://algo.jsdiff.com/sequence/kmp/" />

    <!-- Baidu Analytics -->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?4bdc02239b6fe6f4e90583308d9ed3cd";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body class="bg-decoration algo-page">
    <!-- å…¬å…±é¡µå¤´ç”± JS æ³¨å…¥ -->
    <script type="module" src="/common/header.js"></script>

    <div class="container">
        
        <header class="page-header">
            <h1 class="title" data-en="KMP String Matching Visualization">KMPå­—ç¬¦ä¸²åŒ¹é…å¯è§†åŒ–</h1>
            <p class="subtitle" data-en="Skip unnecessary comparisons using the prefix table">åˆ©ç”¨å‰ç¼€è¡¨è·³è¿‡æ— æ•ˆæ¯”è¾ƒ</p>
        </header>
        
        <!-- ç®—æ³•ç®€ä»‹ -->
        <div class="algo-intro fade-in">
            <p data-en="KMP (Knuth-Morris-Pratt) is an efficient string matching algorithm. It uses information from previous matches to avoid restarting from scratch, achieving O(n+m) time complexity through the 'prefix table' (or next array).">KMPï¼ˆKnuth-Morris-Prattï¼‰ç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚å®ƒåˆ©ç”¨å·²åŒ¹é…éƒ¨åˆ†çš„ä¿¡æ¯ï¼Œé¿å…ä»å¤´å¼€å§‹é‡æ–°åŒ¹é…ï¼Œé€šè¿‡"å‰ç¼€è¡¨"ï¼ˆä¹Ÿå«nextæ•°ç»„ï¼‰å®ç°O(n+m)çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
        </div>
        
        <!-- è¾“å…¥ -->
        <div class="input-section">
            <div class="input-group">
                <label data-en="Text String (T)">æ–‡æœ¬ä¸² (T)</label>
                <input type="text" id="textInput" value="ABABDABACDABABCABAB">
            </div>
            <div class="input-group">
                <label data-en="Pattern String (P)">æ¨¡å¼ä¸² (P)</label>
                <input type="text" id="patternInput" value="ABABCABAB">
            </div>
        </div>
        
        <!-- å‰ç¼€è¡¨ -->
        <div class="prefix-section">
            <div class="section-label" data-en="Prefix Table (Next Array)">å‰ç¼€è¡¨ (Nextæ•°ç»„)</div>
            <div class="prefix-table" id="prefixTable"></div>
        </div>
        
        <!-- åŒ¹é…è¿‡ç¨‹ -->
        <div class="match-section">
            <div class="section-label" data-en="Matching Process">åŒ¹é…è¿‡ç¨‹</div>
            <div class="match-container">
                <div class="text-row" id="textRow"></div>
                <div class="pattern-row" id="patternRow"></div>
            </div>
        </div>
        
        <!-- åŒ¹é…ç»“æœ -->
        <div class="result-section">
            <div class="section-label" data-en="Match Position">åŒ¹é…ä½ç½®</div>
            <div class="match-results" id="matchResults">-</div>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" id="startBtn" data-en="Start">å¼€å§‹</button>
            <button class="btn btn-warning" id="pauseBtn" data-en="Pause" disabled>æš‚åœ</button>
            <button class="btn btn-secondary" id="resetBtn" data-en="Reset">é‡ç½®</button>
        </div>
        
        <div class="info">
            <span class="status-badge" id="statusText" data-en="Click 'Start' to view animation">ç‚¹å‡»"å¼€å§‹"æŸ¥çœ‹åŠ¨ç”»</span>
        </div>
        
        <!-- Tabé¢æ¿ -->
        <div class="tabs-container fade-in">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="principle" data-en="ğŸ“– How It Works">ğŸ“– å·¥ä½œåŸç†</button>
                <button class="tab-btn" data-tab="complexity" data-en="â±ï¸ Complexity">â±ï¸ å¤æ‚åº¦åˆ†æ</button>
                <button class="tab-btn" data-tab="usage" data-en="ğŸ’¡ Applications">ğŸ’¡ åº”ç”¨åœºæ™¯</button>
                <button class="tab-btn" data-tab="code" data-en="ğŸ“ Implementation">ğŸ“ ä»£ç å®ç°</button>
            </div>
            
            <div class="tab-content active" id="principle">
                <h4 data-en="Core Concepts">æ ¸å¿ƒæ¦‚å¿µ</h4>
                <ul>
                    <li data-en="Prefix table records 'longest proper prefix which is also suffix' for each position">å‰ç¼€è¡¨è®°å½•æ¨¡å¼ä¸²æ¯ä¸ªä½ç½®çš„"æœ€é•¿ç›¸ç­‰å‰åç¼€"é•¿åº¦</li>
                    <li data-en="On mismatch, use prefix table to skip positions that can't possibly match">å½“åŒ¹é…å¤±è´¥æ—¶ï¼Œåˆ©ç”¨å‰ç¼€è¡¨è·³è¿‡å·²çŸ¥ä¸å¯èƒ½åŒ¹é…çš„ä½ç½®</li>
                    <li data-en="Pattern doesn't restart from beginning, jumps to position indicated by prefix table">æ¨¡å¼ä¸²ä¸éœ€è¦å›é€€åˆ°èµ·ç‚¹ï¼Œè€Œæ˜¯è·³åˆ°å‰ç¼€è¡¨æŒ‡ç¤ºçš„ä½ç½®</li>
                </ul>
                <p style="margin-top: var(--spacing-sm); color: var(--text-secondary);" data-en="Example: 'ABAB' has longest proper prefix-suffix 'AB', length 2.">
                    ä¾‹å¦‚ "ABAB" çš„æœ€é•¿ç›¸ç­‰å‰åç¼€æ˜¯ "AB"ï¼Œé•¿åº¦ä¸º2ã€‚
                </p>
            </div>
            
            <div class="tab-content" id="complexity">
                <h4 data-en="Time and Space Complexity">æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</h4>
                <table class="complexity-table">
                    <tr>
                        <th data-en="Phase">é˜¶æ®µ</th>
                        <th data-en="Complexity">å¤æ‚åº¦</th>
                        <th data-en="Description">è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td data-en="Build Prefix Table">æ„å»ºå‰ç¼€è¡¨</td>
                        <td class="highlight">O(M)</td>
                        <td data-en="M is pattern length">Mæ˜¯æ¨¡å¼ä¸²é•¿åº¦</td>
                    </tr>
                    <tr>
                        <td data-en="Matching Phase">åŒ¹é…è¿‡ç¨‹</td>
                        <td class="highlight">O(N)</td>
                        <td data-en="N is text length">Næ˜¯æ–‡æœ¬ä¸²é•¿åº¦</td>
                    </tr>
                    <tr>
                        <td data-en="Total Time">æ€»æ—¶é—´</td>
                        <td class="highlight">O(N+M)</td>
                        <td data-en="Much better than naive O(NÃ—M)">è¿œä¼˜äºæœ´ç´ ç®—æ³•çš„O(NÃ—M)</td>
                    </tr>
                    <tr>
                        <td data-en="Space Complexity">ç©ºé—´å¤æ‚åº¦</td>
                        <td>O(M)</td>
                        <td data-en="Store prefix table">å­˜å‚¨å‰ç¼€è¡¨</td>
                    </tr>
                </table>
            </div>
            
            <div class="tab-content" id="usage">
                <h4 data-en="Applications">åº”ç”¨åœºæ™¯</h4>
                <ul>
                    <li data-en="Text editor find functionality">æ–‡æœ¬ç¼–è¾‘å™¨çš„æŸ¥æ‰¾åŠŸèƒ½</li>
                    <li data-en="Search engine keyword matching">æœç´¢å¼•æ“çš„å…³é”®è¯åŒ¹é…</li>
                    <li data-en="DNA sequence pattern search">DNAåºåˆ—æ¨¡å¼æœç´¢</li>
                    <li data-en="Network intrusion detection (signature matching)">ç½‘ç»œå…¥ä¾µæ£€æµ‹ï¼ˆç‰¹å¾ç åŒ¹é…ï¼‰</li>
                    <li data-en="Data compression algorithms">æ•°æ®å‹ç¼©ç®—æ³•</li>
                </ul>
                <div class="use-cases">
                    <span class="use-case-tag" data-en="Text Search">æ–‡æœ¬æœç´¢</span>
                    <span class="use-case-tag" data-en="Pattern Matching">æ¨¡å¼åŒ¹é…</span>
                    <span class="use-case-tag" data-en="Bioinformatics">ç”Ÿç‰©ä¿¡æ¯å­¦</span>
                    <span class="use-case-tag" data-en="Network Security">ç½‘ç»œå®‰å…¨</span>
                </div>
            </div>
            
            <div class="tab-content" id="code">
                <h4 data-en="Implementation">ä»£ç å®ç°</h4>
                <div class="code-lang-tabs">
                    <button class="code-lang-btn active" data-lang="python">
                        <span class="lang-icon">ğŸ</span> Python
                    </button>
                    <button class="code-lang-btn" data-lang="java">
                        <span class="lang-icon">â˜•</span> Java
                    </button>
                </div>
                
                <div class="code-container">
                    <div class="code-block active" id="python-code">
                        <pre class="code"><span class="keyword">def</span> <span class="function">build_next</span>(pattern):
    <span class="string">"""æ„å»ºå‰ç¼€è¡¨ï¼ˆNextæ•°ç»„ï¼‰"""</span>
    m = <span class="function">len</span>(pattern)
    next_arr = [<span class="number">0</span>] * m
    j = <span class="number">0</span>
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, m):
        <span class="keyword">while</span> j > <span class="number">0</span> <span class="keyword">and</span> pattern[i] != pattern[j]:
            j = next_arr[j - <span class="number">1</span>]
        <span class="keyword">if</span> pattern[i] == pattern[j]:
            j += <span class="number">1</span>
        next_arr[i] = j
    
    <span class="keyword">return</span> next_arr


<span class="keyword">def</span> <span class="function">kmp_search</span>(text, pattern):
    <span class="string">"""KMPå­—ç¬¦ä¸²åŒ¹é…"""</span>
    <span class="keyword">if not</span> pattern:
        <span class="keyword">return</span> []
    
    next_arr = <span class="function">build_next</span>(pattern)
    results = []
    j = <span class="number">0</span>
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="function">len</span>(text)):
        <span class="keyword">while</span> j > <span class="number">0</span> <span class="keyword">and</span> text[i] != pattern[j]:
            j = next_arr[j - <span class="number">1</span>]
        <span class="keyword">if</span> text[i] == pattern[j]:
            j += <span class="number">1</span>
        <span class="keyword">if</span> j == <span class="function">len</span>(pattern):
            results.<span class="function">append</span>(i - j + <span class="number">1</span>)
            j = next_arr[j - <span class="number">1</span>]
    
    <span class="keyword">return</span> results


<span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span>
text = <span class="string">"ABABDABACDABABCABAB"</span>
pattern = <span class="string">"ABABCABAB"</span>
positions = <span class="function">kmp_search</span>(text, pattern)
<span class="function">print</span>(<span class="string">f"åŒ¹é…ä½ç½®: {positions}"</span>)
<span class="comment"># è¾“å‡º: åŒ¹é…ä½ç½®: [10]</span></pre>
                    </div>
                    
                    <div class="code-block" id="java-code">
                        <pre class="code"><span class="keyword">import</span> java.util.*;

<span class="keyword">public class</span> <span class="type">KMP</span> {
    
    <span class="comment">/**
     * æ„å»ºå‰ç¼€è¡¨ï¼ˆNextæ•°ç»„ï¼‰
     */</span>
    <span class="keyword">private static int</span>[] <span class="function">buildNext</span>(<span class="type">String</span> pattern) {
        <span class="type">int</span> m = pattern.<span class="function">length</span>();
        <span class="type">int</span>[] next = <span class="keyword">new</span> <span class="type">int</span>[m];
        <span class="type">int</span> j = <span class="number">0</span>;
        
        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i < m; i++) {
            <span class="keyword">while</span> (j > <span class="number">0</span> && pattern.<span class="function">charAt</span>(i) != pattern.<span class="function">charAt</span>(j)) {
                j = next[j - <span class="number">1</span>];
            }
            <span class="keyword">if</span> (pattern.<span class="function">charAt</span>(i) == pattern.<span class="function">charAt</span>(j)) {
                j++;
            }
            next[i] = j;
        }
        
        <span class="keyword">return</span> next;
    }
    
    <span class="comment">/**
     * KMPå­—ç¬¦ä¸²åŒ¹é…
     */</span>
    <span class="keyword">public static</span> <span class="type">List</span>&lt;<span class="type">Integer</span>&gt; <span class="function">kmpSearch</span>(<span class="type">String</span> text, <span class="type">String</span> pattern) {
        <span class="type">List</span>&lt;<span class="type">Integer</span>&gt; results = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;&gt;();
        <span class="keyword">if</span> (pattern.<span class="function">isEmpty</span>()) <span class="keyword">return</span> results;
        
        <span class="type">int</span>[] next = <span class="function">buildNext</span>(pattern);
        <span class="type">int</span> j = <span class="number">0</span>;
        
        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i < text.<span class="function">length</span>(); i++) {
            <span class="keyword">while</span> (j > <span class="number">0</span> && text.<span class="function">charAt</span>(i) != pattern.<span class="function">charAt</span>(j)) {
                j = next[j - <span class="number">1</span>];
            }
            <span class="keyword">if</span> (text.<span class="function">charAt</span>(i) == pattern.<span class="function">charAt</span>(j)) {
                j++;
            }
            <span class="keyword">if</span> (j == pattern.<span class="function">length</span>()) {
                results.<span class="function">add</span>(i - j + <span class="number">1</span>);
                j = next[j - <span class="number">1</span>];
            }
        }
        
        <span class="keyword">return</span> results;
    }
    
    <span class="keyword">public static void</span> <span class="function">main</span>(<span class="type">String</span>[] args) {
        <span class="type">String</span> text = <span class="string">"ABABDABACDABABCABAB"</span>;
        <span class="type">String</span> pattern = <span class="string">"ABABCABAB"</span>;
        <span class="type">List</span>&lt;<span class="type">Integer</span>&gt; positions = <span class="function">kmpSearch</span>(text, pattern);
        System.out.<span class="function">println</span>(<span class="string">"åŒ¹é…ä½ç½®: "</span> + positions);
        <span class="comment">// è¾“å‡º: åŒ¹é…ä½ç½®: [10]</span>
    }
}</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <link rel="stylesheet" href="/common/logger.css">
    <script type="module" src="/common/footer.js"></script>
    <script type="module" src="/common/i18n.js"></script>
    <script src="/common/logger.js"></script>
    <script src="script.js"></script>
    <script>
        // è¯­è¨€åˆ‡æ¢å™¨äº‹ä»¶
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                if (window.I18n) {
                    window.I18n.switchLanguage(lang);
                }
            });
        });
        
    </script>
    <script type="module" src="/common/tabs.js"></script>
</body>
</html>
